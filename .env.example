# .env.example
# This file contains all the available configuration options for the application.
# Copy this file to .env and fill in the required values.

# -----------------------------------------------------------------------------
# Basic Application Settings
# -----------------------------------------------------------------------------
APP_NAME="faster"
APP_VERSION="0.0.1"
APP_DESCRIPTION="A modern and fast Python web framework"
ENVIRONMENT="development" # (development, staging, production)
API_PREFIX="/api/v1"

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------
HOST="0.0.0.0"
PORT=8000
WORKERS=4
ACCESS_LOG=True
# LIMIT_CONCURRENCY=100
# LIMIT_MAX_REQUESTS=1000
TIMEOUT_KEEP_ALIVE=5
# SSL_KEYFILE="/path/to/key.pem"
# SSL_CERTFILE="/path/to/cert.pem"
# SSL_VERSION=
RELOAD_DIRS="[]" # e.g., '["/app/src"]'
RELOAD_INCLUDES="[]" # e.g., '["*.py"]'
RELOAD_EXCLUDES="[]" # e.g., '["*/__pycache__/*"]'
ALLOWED_HOSTS='["*"]' # e.g., '["localhost", "example.com"]'

# -----------------------------------------------------------------------------
# Database Settings (Required) - Choose One Option
# -----------------------------------------------------------------------------

# Option A: Traditional Databases
# DATABASE_URL="postgresql+asyncpg://user:password@localhost:5432/mydatabase"
DATABASE_URL="sqlite+aiosqlite:///./app.db"

# Option B: Cloudflare D1 Database (Recommended for Workers deployment)
# For Workers Binding Mode (Production):
# DATABASE_URL="d1+binding://DB"

# For HTTP Client Mode (Development/Testing):
# DATABASE_URL="d1+aiosqlite://database_id?account_id=ACCOUNT_ID&api_token=API_TOKEN"

# D1 HTTP Mode Credentials (Optional - for development/testing)
# CLOUDFLARE_ACCOUNT_ID="your-account-id"
# CLOUDFLARE_API_TOKEN="your-api-token"
# D1_DATABASE_ID="your-database-id"

# Database Pool Settings (for traditional databases)
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=0
DATABASE_ECHO=False

# -----------------------------------------------------------------------------
# # Redis Settings (Required,# Provider options: local, upstash, fake)
# -----------------------------------------------------------------------------
REDIS_PROVIDER="local"
REDIS_URL="redis://localhost:6379/0"
REDIS_PASSWORD=""
REDIS_MAX_CONNECTIONS=50
REDIS_DECODE_RESPONSES=True
REDIS_ENABLED=True

# -----------------------------------------------------------------------------
# Celery Settings (Required)
# -----------------------------------------------------------------------------
# CELERY_BROKER_URL="redis://localhost:6379/1"
# CELERY_RESULT_BACKEND="redis://localhost:6379/2"
# CELERY_TASK_ALWAYS_EAGER=False

# -----------------------------------------------------------------------------
# Supabase Settings (Required)
# -----------------------------------------------------------------------------
SUPABASE_URL="https://your-project-ref.supabase.co"
SUPABASE_ANON_KEY="your-supabase-anon-key"
SUPABASE_SERVICE_ROLE_KEY="your-supabase-service-key"
SUPABASE_JWKS_URL=""
SUPABASE_AUDIENCE="authenticated"
AUTO_REFRESH_JWKS=True

# -----------------------------------------------------------------------------
# Stripe Settings (Required)
# -----------------------------------------------------------------------------
# STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
# STRIPE_WEBHOOK_SECRET="whsec_your_stripe_webhook_secret"
# STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"

# -----------------------------------------------------------------------------
# Security Settings (JWT_SECRET_KEY is Required)
# -----------------------------------------------------------------------------
AUTH_ENABLED=True
JWKS_CACHE_TTL_SECONDS=3600
USER_CACHE_TTL_SECONDS=3600

CORS_ORIGINS='["*"]' # e.g., '["http://localhost:3000", "https://your-frontend.com"]'
CORS_CREDENTIALS=True
CORS_ENABLED=True
CORS_ALLOW_METHODS='["*"]'
CORS_ALLOW_HEADERS='["*"]'
CORS_EXPOSE_HEADERS='[]'
GZIP_ENABLED=True
GZIP_MIN_SIZE=1000
TRUSTED_HOSTS='["*"]'

# -----------------------------------------------------------------------------
# Logging Settings
# -----------------------------------------------------------------------------
LOG_LEVEL="INFO"
LOG_FORMAT="json" # (json or console)
LOG_FILE="./logs/app.log"

# -----------------------------------------------------------------------------
# Deployment Platform Settings
# -----------------------------------------------------------------------------
DEPLOYMENT_PLATFORM="auto" # (vps, cloudflare-workers, auto)

# -----------------------------------------------------------------------------
# VPS-specific Settings
# -----------------------------------------------------------------------------
VPS_REVERSE_PROXY=False
VPS_STATIC_FILES_PATH="static"
VPS_MAX_REQUEST_SIZE=16777216 # 16 * 1024 * 1024 bytes
VPS_ENABLE_METRICS=True
VPS_PROCESS_MANAGER="uvicorn" # (uvicorn, gunicorn, hypercorn)

# -----------------------------------------------------------------------------
# Cloudflare Workers Specific Settings
# -----------------------------------------------------------------------------
CF_WORKERS_COMPATIBILITY_DATE="2024-09-24"
CF_WORKERS_MEMORY_LIMIT=128
CF_WORKERS_TIMEOUT=30
# CF_WORKERS_KV_NAMESPACE=""

# D1 Database Settings (for Workers deployment)
# CF_WORKERS_D1_DATABASE="faster-app-dev"  # Database name from wrangler.toml
# Note: The D1 binding name is configured in wrangler.toml as "DB"

# -----------------------------------------------------------------------------
# Auto-scaling and Performance Settings
# -----------------------------------------------------------------------------
AUTO_SCALE_WORKERS=False
MIN_WORKERS=1
MAX_WORKERS=16
WORKER_MEMORY_LIMIT=512

# -----------------------------------------------------------------------------
# Sentry Settings
# -----------------------------------------------------------------------------
SENTRY_DSN=
SENTRY_TRACE_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_CLIENT_DSN=
# Transport settings for better error handling
SENTRY_TIMEOUT=10
SENTRY_RETRIES=3
SENTRY_SHUTDOWN_TIMEOUT=5
